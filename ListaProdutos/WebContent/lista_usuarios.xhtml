<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./_template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:prime="http://primefaces.org/ui">

    <ui:define name="content">
        <h:form id="form">
        
			<h1><prime:outputLabel value="#{msgs.lista_user_adicionar_novo_usuario}"/></h1>
			
			<prime:panelGrid columns="3">
				<prime:outputLabel value="#{msgs.alter_user_login}" for="login" />
				<prime:inputText value="#{userBean.usuario.login}"
					id="login" label="login" required="true" requiredMessage="#{msgs.erro_alter_user_login}" validatorMessage="#{msgs.validator_}" >
						<f:validateLength minimum="1" maximum="20"/>
					</prime:inputText>
				<prime:message for="login" styleClass="erro" />

				<prime:outputLabel value="#{msgs.alter_user_perfil}" for="perfil" />
				<prime:inputText value="#{userBean.usuario.perfil}"
					id="perfil" label="perfil" required="true" requiredMessage="#{msgs.erro_alter_user_perfil}"/>
				<prime:message for="perfil" styleClass="erro" />

				<prime:outputLabel value="#{msgs.alter_user_senha}" for="senha" />
				<h:inputSecret value="#{userBean.usuario.senha}"
					id="senha" label="senha" required="true" requiredMessage="#{msgs.erro_alter_user_senha}"/>
				<prime:message for="senha" styleClass="erro" />

				<prime:outputLabel value="#{msgs.alter_user_nome}" for="nome" />
				<prime:inputText value="#{userBean.usuario.nome}"
					id="nome" label="nome" required="true" requiredMessage="#{msgs.erro_alter_user_nome}"/>
				<prime:message for="nome" styleClass="erro" />


				<prime:outputLabel value="#{msgs.alter_user_cpf}" for="cpf" />
				<prime:inputText value="#{userBean.usuario.cpf}"
					id="cpf" label="cpf" required="true" requiredMessage="#{msgs.erro_alter_user_cpf}" />
				<prime:message for="cpf" styleClass="erro" />

				<prime:outputLabel value="#{msgs.alter_user_email}" for="email" />
				<prime:inputText value="#{userBean.usuario.email}"
					id="email" label="email" required="true"  requiredMessage="#{msgs.erro_alter_user_email}"/>
				<prime:message for="email" styleClass="erro" />

				<prime:outputLabel value="#{msgs.alter_user_cep}" for="cep" />
				<prime:inputText value="#{userBean.usuario.cep}"
					id="cep" label="cep" required="true" requiredMessage="#{msgs.erro_alter_user_cep}"/>
				<prime:message for="cep" styleClass="erro" />

				<prime:outputLabel value="#{msgs.alter_user_celular}" for="celular" />
				<prime:inputText value="#{userBean.usuario.celular}"
					id="celular" label="celular" required="true" requiredMessage="#{msgs.erro_alter_user_celular}" />
				<prime:message for="celular" styleClass="erro" />


			</prime:panelGrid>

			<h:commandButton value="#{msgs.acicionar_usuario_lista}"
				action="#{userBean.addUsuario()}" />

       </h:form>
        <h:form>


            <prime:dataTable value="#{userBean.listaUsuarios}" var="u"          
                         styleClass="tabela" captionClass="tabelaCaption" 
                         headerClass="tabelaHeader" 
                         rowClasses="linhaPar, linhaImpar">
                <f:facet name="caption">#{msgs.lista_user_adicionar_novo_usuario}</f:facet>

                <prime:column>
                    <f:facet name="header">#{msgs.lista_user_nome}</f:facet>
                    <prime:outputLabel value="#{u.id}-#{u.nome}"/>
                </prime:column>
                <prime:column>
                    <f:facet name="header">#{msgs.lista_user_login}</f:facet>
                    <prime:outputLabel value="#{u.login}"/>
                </prime:column>
                <prime:column>
                    <f:facet name="header">#{msgs.lista_user_perfil}</f:facet>
                    <prime:outputLabel value="#{u.perfil}"/>
                </prime:column>
                <prime:column>
                    <f:facet name="header">#{msgs.lista_user_cpf}</f:facet>
                    <prime:outputLabel value="#{u.cpf}"/>
                </prime:column>
                <prime:column>
                    <f:facet name="header">#{msgs.lista_user_email}</f:facet>
                    <prime:outputLabel value="#{u.email}"/>
                </prime:column>
                <prime:column>
                    <f:facet name="header">#{msgs.lista_user_cep}</f:facet>
                    <prime:outputLabel value="#{u.cep}"/>
                </prime:column>
                <prime:column>
                    <f:facet name="header">#{msgs.lista_user_celular}</f:facet>
                    <prime:outputLabel value="#{u.celular}"/>
                </prime:column>

                <prime:column>
                	<h:commandButton value="#{msgs.lista_user_alterar}" action="#{userBean.alterarUsuarioSel(u)}"/>
               	</prime:column>

                <prime:column>
                	<h:commandButton value="#{msgs.lista_user_excluir}" action="#{userBean.excluirUsuarioSel(u)}">
                		<f:ajax render="@form"></f:ajax>
                	</h:commandButton>
               	</prime:column>
               
            </prime:dataTable>

       </h:form>
    </ui:define>
</ui:composition>
